/**
 mithril-canvas - Mithril Canvas library
 @version v0.0.5
 @link https://github.com/7korobi/mithril-canvas
 @license 
**/


(function(){var a,b,c,d,e;c=function(a,b){var c,d,e,f,g,h;return d=a.pageX,e=a.pageY,c=b.left,f=b.top,g=2*(d-c-window.scrollX),h=2*(e-f-window.scrollY),{x:g,y:h}},d=function(a,b){var c,d,e,f,g,h;return d=a.pageX,e=a.pageY,c=b.left,f=b.top,g=2*(d-c),h=2*(e-f-window.scrollY),{x:g,y:h}},module.exports=function(e){return e.ios||e.ff||e.old&&e.chrome?b.touch=c:b.touch=d,a},b={touch:d,mouse:function(a){var b,c;return b=a.offsetX||a.layerX,c=a.offsetY||a.layerY,null!=b&&null!=c?(b*=2,c*=2,{x:b,y:c}):void 0},offsets:function(a,c,d){var e,f;if(d.offset=null,d.offsets=[],null!=a&&null!=c)if(null!=a.touches){if(e=c.getBoundingClientRect(),d.offsets=function(){var c,d,g,h;for(g=a.touches,h=[],c=0,d=g.length;d>c;c++)f=g[c],h.push(b.touch(f,e));return h}(),1===a.touches.length)return d.offset=d.offsets[0]}else if(d.offset=b.mouse(a),null!=d.offset)return d.offsets=[d.offset]},offset:function(a,c){var d;return null==a||null==c?null:null!=a.touches?(d=c.getBoundingClientRect(),b.touch(a.touches[0],d)):b.mouse(a)}},e=["config","data","background","draw","onmove"],a=function(a){return{controller:function(c,d){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;for(t=d.size,w=t[0],p=t[1],u=w+"x"+p,h=null,k=new a(d),q=0,r=e.length;r>q;q++)o=e[q],null==k[o]&&(k[o]=function(){});f={state:"boot",is_touch:!1,offsets:[],event:{}},i=function(a){return a.preventDefault(),f.event=a,k.onmove(f),m()},v=function(a){return f.state="onstart",f.is_touch=!0,i(a)},g=function(a){return f.state="oncancel",f.is_touch=!1,i(a)},n=function(a){return f.state="onend",f.is_touch=!1,i(a)},s=function(a){return f.state="onmove",b.offsets(a,h,f),f.event=a,i(a)},l=function(){var a,b,c;return a=f.ctx,b=k.data(),b&&(null==b.canvas&&(b.canvas={}),c=b.canvas[u])?void a.putImageData(c,0,0):(k.background(f),b?b.canvas[u]=a.getImageData(0,0,2*w,2*p):void 0)},m=function(){return l(),k.draw(f)},j=function(a,b,c){return f.ctx||(h=a,f.ctx=h.getContext("2d")),k.config(h,b,c),k.onmove(f),m()},this.canvas_attr={width:w,height:p,style:"width: "+w/2+"px; height: "+p/2+"px;",ontouchend:n,ontouchmove:s,ontouchstart:v,ontouchcancel:g,onmouseup:n,onmousemove:s,onmousedown:v,onmouseout:n,onmouseover:s,config:j}},view:function(a,b){return m("canvas"+b,a.canvas_attr)}}}}).call(this);
//# sourceMappingURL=mithril-canvas.min.js.map